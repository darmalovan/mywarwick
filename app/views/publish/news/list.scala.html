@import system.RequestContext
@import models.news.NewsItemRender
@import views.html._
@import models.publishing.Ability.CreateNews
@import models.publishing.Role
@import models.publishing.Publisher
@import models.news.NewsItemAudit
@(
    publisher: Publisher,
    newsPending: Seq[NewsItemRender],
    newsPublished: Seq[NewsItemRender],
    newsAuditMap: Map[NewsItemRender, Option[NewsItemAudit]],
    counts: Map[String, AudienceSize],
    user: Role
)(implicit context: RequestContext)

  @common.admin("News") {
    @if(user can CreateNews) {
      <p>
        <a class="btn btn-default" href="@controllers.publish.routes.NewsController.createForm(publisher.id)">
          Create news</a>
      </p>
    }

    <h3>Pending</h3>
    @if(newsPending.isEmpty) {
      <p>No pending news.</p>
    } else {
      @newsPending.map { item =>
        @publish.news.newsItemInfo(publisher.id, item, newsAuditMap(item), counts.get(item.id), user)
      }
    }

    <h3>Published</h3>
    @if(newsPublished.isEmpty) {
      <p>No published news.</p>
    } else {
      @newsPublished.map { item =>
        @publish.news.newsItemInfo(publisher.id, item, newsAuditMap(item), counts.get(item.id), user)
      }
    }
  }